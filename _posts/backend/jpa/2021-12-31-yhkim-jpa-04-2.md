---
layout: post
title: "[김영한 - JPA 기본] #4 엔티티 매핑 - 2"
subtitle: "..."
date: 2021-12-26 20::00 +0900
categories: backend
tags: wooteco
comments: true
---

# 실전 예제 - 1. 요구사항 분석과 기본 매핑

예제에 필요한 코드들이다 !

```java
public class JpaMain {
	public static void main(String[] args) {
		EntityManagerFactory emf = Persistence.createEntityManagerFactory("jpashop");
		EntityManager em = emf.createEntityManager();
		EntityTransaction tx = em.getTransaction();

		tx.begin();

		try {
			tx.commit();
		} catch (Exception e) {
			System.out.println("rollback !! ");
			tx.rollback();
			e.printStackTrace();
		}

		em.close();
		emf.close();
	}
}
```

```java
@Entity
public class Member {

	@Id
	@GeneratedValue
	@Column(name = "MEMBER_ID")
	private Long id;

	private String name;

	private String street;

	private String zipcode;

	@Column(name = "ORDER_ID")
	private Long orderId;

  // getters & setters ...
```

```java
@Entity
@Table(name = "ORDERS")
public class Order {

	@Id @GeneratedValue
	@Column(name = "ORDER_ID")
	private Long id;

	@Column(name = "MEMBER_ID")
	private Long memberId;

	private LocalDateTime orderDate;

	@Enumerated(EnumType.STRING)
	private OrderStatus status;

```

```java
public enum OrderStatus {
	ORDER, CANCEL;
}
```

```java
@Entity
public class OrderItem {

	@Id @GeneratedValue
	@Column(name = "ORDER_ITEM_ID")
	private Long id;

	private Long orderId;

	private Long itemId;

	private int orderPrice;

	private int count;
```

```java
@Entity
public class Item {

	@Id @GeneratedValue
	@Column(name = "ITEM_ID")
	private Long id;

	private String name;

	private int price;

	private int stockQuantity;
```

## 영한님 노하우

예를들어 Member의 이름에 10글자 제한을 두고 싶다..

DB에 DDL로 컬럼을 수정하는 방법도 있지만

```java
@Column(length = 10)
private String name;
```

위처럼 조건을 자바에 명시할 수도 있다

이 방식의 장점을 굳이 DB Client tool 을 매번 열어서 확인할 필요 없이

소스 코드상에서 확인할 수 있다는 장점이 있다 !
